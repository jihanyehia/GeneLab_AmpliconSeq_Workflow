{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com///nextflow_schema.json",
    "title": " pipeline parameters",
    "description": "Amplicon Illumina workflow for pipeline document GL-DPPD-7104-C",
    "type": "object",
    "properties": {
        "conda_diversity": {
            "type": "string",
            "description": "Path to a conda environment containing R packages required for diversity and differential abundance testing (ANCOMBC and DESeq2)."
        },
        "conda_cutadapt": {
            "type": "string",
            "description": "Path to a conda environment containing cutadapt."
        },
        "conda_dp_tools": {
            "type": "string",
            "description": "Path to a conda environment containing dp_tools."
        },
        "conda_R": {
            "type": "string",
            "description": "ath to a conda environment containing R along with the packages decipher and biomformat installed."
        },
        "conda_zip": {
            "type": "string",
            "description": "Path to a conda environment containing zip."
        },
        "conda_multiqc": {
            "type": "string",
            "description": "Path to a conda environment containing multiqc"
        },
        "conda_fastqc": {
            "type": "string",
            "description": "Path to a conda environment containing fastqc."
        },
        "target_region": {
            "type": "string",
            "default": "16S",
            "description": "What is the amplicon target region to be analyzed? Options are one of [16S, 18S, ITS]."
        },
        "raw_R1_suffix": {
            "type": "string",
            "default": "_R1_raw.fastq.gz",
            "description": "Raw forward reads suffix (region following the unique part of the sample names). e.g. _R1_raw.fastq.gz."
        },
        "raw_R2_suffix": {
            "type": "string",
            "default": "_R2_raw.fastq.gz",
            "description": "Raw reverse reads suffix (region following the unique part of the sample names). e.g. _R2_raw.fastq.gz."
        },
        "trim_primers": {
            "type": "string",
            "default": "TRUE",
            "description": "Should primers be trimmed? TRUE or FALSE."
        },
        "input_file": {
            "type": "string",
            "description": "A 4-column (single-end) or 5-column (paired-end) input file (sample_id, forward, [reverse,] paired, groups). Mandatory if a GLDS or OSD accession is not provided."
        },
        "min_cutadapt_len": {
            "type": "integer",
            "default": 130,
            "description": "What should be the minimum read length after quality trimming with cutadapt."
        },
        "primers_linked": {
            "type": "string",
            "default": "TRUE",
            "description": "Are the primers linked?. https://cutadapt.readthedocs.io/en/stable/recipes.html#trimming-amplicon-primers-from-paired-end-reads."
        },
        "discard_untrimmed": {
            "type": "string",
            "default": "TRUE",
            "description": "Should untrimmed reads be discarded? Any supplied string except TRUE will not discard them."
        },
        "anchored_primers": {
            "type": "string",
            "default": "TRUE",
            "description": "Are the primers anchored? https://cutadapt.readthedocs.io/en/stable/recipes.html#trimming-amplicon-primers-from-paired-end-reads."
        },
        "F_primer": {
            "type": "string",
            "description": "Forward primer sequence e.g. AGAGTTTGATCCTGGCTCAG."
        },
        "R_primer": {
            "type": "string",
            "description": "Reverse primer sequence e.g. CTGCCTCCCGTAGGAGT."
        },
        "left_trunc": {
            "type": "integer",
            "default": 0,
            "description": "truncate the sequences to the left by this number of bases for dada2."
        },
        "right_trunc": {
            "type": "integer",
            "default": 0,
            "description": "truncate the sequences to the right by this number of bases for dada2."
        },
        "left_maxEE": {
            "type": "integer",
            "default": 1,
            "description": "Maximum allowed errors to the left for dada2."
        },
        "right_maxEE": {
            "type": "integer",
            "default": 1,
            "description": "Maximum allowed errors to the right for dada2."
        },
        "concatenate_reads_only": {
            "type": "string",
            "default": "FALSE",
            "description": "This is typically used with primers like 515-926, that captured 18S fragments that are typically too long to merge.."
        },
        "accession": {
            "type": "string",
            "description": "A Genelab accession number if the --input_file parameter is not set. If this parameter is set, it will ignore the --input_file parameter."
        },
        "assay_suffix": {
            "type": "string",
            "default": "_GLAmpSeq",
            "description": "Genelabs assay suffix."
        },
        "output_prefix": {
            "type": "string",
            "description": "Unique name to tag onto output files."
        },
        "publishDir_mode": {
            "type": "string",
            "default": "link",
            "description": "How should nextflow publish file outputs. Options can be found here https://www.nextflow.io/docs/latest/process.html#publishdir."
        },
        "primer_trimmed_R1_suffix": {
            "type": "string",
            "default": "_R1_trimmed.fastq.gz",
            "description": "Suffix to use for naming your primer trimmed forward reads."
        },
        "primer_trimmed_R2_suffix": {
            "type": "string",
            "default": "_R2_trimmed.fastq.gz",
            "description": "Suffix to use for naming your primer trimmed reverse reads."
        },
        "filtered_R1_suffix": {
            "type": "string",
            "default": "_R1_filtered.fastq.gz",
            "description": "Suffix to use for naming your quality filtered forward reads."
        },
        "filtered_R2_suffix": {
            "type": "string",
            "default": "_R2_filtered.fastq.gz",
            "description": "Suffix to use for naming your quality filtered reverse reads."
        },
        "raw_reads_dir": {
            "type": "string",
            "default": "../Raw_Sequence_Data/",
            "description": "Where should the fastqc report of the raw reads be stored?"
        },
        "metadata_dir": {
            "type": "string",
            "default": "../Metadata/",
            "description": "This directory contains a file listing the software versions used by the pipeline."
        },
        "genelab_dir": {
            "type": "string",
            "default": "../GeneLab/",
            "description": "This directory contains the runsheet, ISA zip file and params file used when an --accession is used to run the workflow."
        },
        "fastqc_out_dir": {
            "type": "string",
            "default": "../workflow_output/FastQC_Outputs/",
            "description": "Where should multiqc outputs be stored?"
        },
        "trimmed_reads_dir": {
            "type": "string",
            "default": "../workflow_output/Trimmed_Sequence_Data/",
            "description": "Where should your cutadapt trimmed reads be stored?"
        },
        "filtered_reads_dir": {
            "type": "string",
            "default": "../workflow_output/Filtered_Sequence_Data/",
            "description": "Where should your filtered reads be stored?"
        },
        "final_outputs_dir": {
            "type": "string",
            "default": "../workflow_output/Final_Outputs/",
            "description": "Where should most outputs and summary reports be stored?"
        },
        "multiqc_config": {
            "type": "string",
            "default": "config/multiqc.config",
            "description": "Path to a custome multiqc config file."
        },
        "diff_abund_method": {
            "type": "string",
            "default": "all",
            "description": "The method to use for differential abundance testing. Either ['all', 'ancombc1', 'ancombc2', or 'deseq2'] respectively."
        },
        "group": {
            "type": "string",
            "default": "groups",
            "description": "Column in input csv file with treatments to be compared."
        },
        "samples_column": {
            "type": "string",
            "default": "sample_id",
            "description": "Column in input csv file with sample names belonging to each treatment group."
        },
        "remove_struc_zeros": {
            "type": "boolean",
            "description": "Should structural zeros (a.k.a ASVs with zeros count in atleast one group) be removed? default is false i.e. structural zeros will be retained. Options are true or false."
        },
        "remove_rare": {
            "type": "boolean",
            "description": "Should rare features be filtered out prior to analysis? If true, rare features will be removed. Options are true or false."
        },
        "prevalence_cutoff": {
            "type": "integer",
            "default": 0,
            "description": "If --remove_rare is true, a numerical fraction between 0 and 1. Taxa with prevalences(the proportion of samples in which the taxon is present) less than this will be excluded from diversity and diffrential abundance analysis. Default is 0 , i.e. do not exclude any taxa. For example, to exclude taxa that are not present in at least 15% of the samples set it to 0.15."
        },
        "library_cutoff": {
            "type": "integer",
            "default": 0,
            "description": "If --remove-rare is true, a numerical threshold for filtering samples based on library sizes. Samples with library sizes less than this number will be excluded in the analysis. Default is 0 i.e do not remove any sample. For example, if you want to discard samples with library sizes less than 100, then set to 100."
        },
        "rarefaction_depth": {
            "type": "integer",
            "default": 500,
            "description": "The Minimum desired sample rarefaction depth for diversity analysis."
        },
        "errorStrategy": {
            "type": "string",
            "default": "terminate",
            "description": "How should nextflow handle errors. Options can be found here https://www.nextflow.io/docs/latest/process.html#errorstrategy."
        },
        "debug": {
            "type": "boolean",
            "description": "Set to true if you'd like to see the values of your set parameters printed to the terminal."
        },
        "containerEngine": {
            "type": "string",
            "default": "singularity",
            "hidden": true,
            "description": "The container engine to use. singularity or docker."
        },
        "use_conda": {
            "type": "boolean",
            "hidden": true,
            "description": "Should conda be used by default to run the workflow?"
        }
    },
    "required": [
        "target_region",
        "raw_R1_suffix",
        "raw_R2_suffix",
        "trim_primers",
        "input_file"
    ]
}
